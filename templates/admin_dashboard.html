{% extends "layout.html" %}

{% block title %}Regional Admin Dashboard - {{ user.name }}{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/dashboards.css') }}">
<style>
    .admin-controls {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-top: 20px;
    }
</style>
{% endblock %}

{% block content %}
<div class="dashboard-page">
    <div class="dashboard-hero">
        <div class="container">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <h1>Regional Administrator Dashboard</h1>
                    <p>Primary Branch: <strong>{{ session.get('branch_id', 'Unassigned') }}</strong> | Full Administrative Access</p>
                </div>
                <div class="role-badge role-admin" style="font-size: 1.2rem; padding: 10px 20px;">
                    <i class="fas fa-shield-alt"></i> LEVEL 5 ADMIN
                </div>
            </div>
        </div>
    </div>

    <div class="dashboard-content container">
        <!-- Multi-Branch Snapshot -->
        <div class="dashboard-section fade-in">
            <div class="section-header">
                <h2 class="section-title">Regional Overview</h2>
            </div>
            <div class="stats-grid">
                <div class="glass-card stat-item">
                    <div class="stat-icon" style="background: var(--secondary-gradient);"><i class="fas fa-users"></i></div>
                    <div class="stat-value">52</div>
                    <div class="stat-label">Total Staff</div>
                </div>
                <div class="glass-card stat-item">
                    <div class="stat-icon" style="background: var(--accent-gradient);"><i class="fas fa-calendar-alt"></i></div>
                    <div class="stat-value">342</div>
                    <div class="stat-label">Bookings This Month</div>
                </div>
                <div class="glass-card stat-item">
                    <div class="stat-icon" style="background: var(--primary-gradient);"><i class="fas fa-percentage"></i></div>
                    <div class="stat-value">84%</div>
                    <div class="stat-label">Target Achieved</div>
                </div>
                <div class="glass-card stat-item">
                    <div class="stat-icon" style="background: var(--secondary-gradient);"><i class="fas fa-ticket-alt"></i></div>
                    <div class="stat-value">12</div>
                    <div class="stat-label">Active Coupons</div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-8">
                <!-- User Management -->
                <div class="dashboard-section fade-in">
                    <div class="section-header">
                        <h2 class="section-title">User & Role Management</h2>
                        <a href="#" class="btn-primary btn-small"><i class="fas fa-user-plus"></i> NEW USER</a>
                    </div>
                    <div class="glass-card">
                        <table class="premium-table">
                            <thead>
                                <tr>
                                    <th>User</th>
                                    <th>Role</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Rajesh Kumar</strong><br><small>rajesh.mumbai@blissfulabodes.com</small></td>
                                    <td><span class="role-badge role-manager">BRANCH MANAGER</span></td>
                                    <td><button class="btn-text">Edit</button></td>
                                </tr>
                                <tr>
                                    <td><strong>Vijay Verma</strong><br><small>vijay.staff@blissfulabodes.com</small></td>
                                    <td><span class="role-badge role-staff">STAFF</span></td>
                                    <td><button class="btn-text">Edit</button></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Room Inventory -->
                <div class="dashboard-section fade-in">
                    <div class="section-header">
                        <h2 class="section-title">Room Inventory Control</h2>
                        <a href="{{ url_for('create_room') }}" class="btn-primary btn-small"><i class="fas fa-plus"></i> ADD ROOM</a>
                    </div>
                    <div class="glass-card">
                        <div class="d-flex justify-content-between mb-3">
                            <div>Active Rooms: <strong>98</strong></div>
                            <div>Under Maintenance: <strong class="text-danger">2</strong></div>
                        </div>
                        <div class="admin-controls">
                            <button class="btn-secondary">Bulk Price Update</button>
                            <button class="btn-secondary">Export Inventory (CSV)</button>
                            <button class="btn-secondary">Manage Categories</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <!-- Promotion & Coupons -->
                <div class="glass-card mb-4">
                    <h3>Coupons & Offers</h3>
                    <div class="mt-3">
                        <div class="p-3 mb-2 rounded" style="background: #f8f9fa; border-left: 4px solid var(--secondary);">
                            <div class="d-flex justify-content-between">
                                <strong>MUMBAI20</strong>
                                <span class="badge badge-success">ACTIVE</span>
                            </div>
                            <p class="mb-0 small">20% Off | 45/100 Used</p>
                        </div>
                        <div class="p-3 mb-2 rounded" style="background: #f8f9fa; border-left: 4px solid var(--secondary);">
                            <div class="d-flex justify-content-between">
                                <strong>WELCOME15</strong>
                                <span class="badge badge-success">ACTIVE</span>
                            </div>
                            <p class="mb-0 small">15% Off | Multi-branch</p>
                        </div>
                    </div>
                    <button class="btn-primary btn-block mt-3">CREATE NEW COUPON</button>
                </div>

                <!-- Review Moderation -->
                <div class="glass-card">
                    <h3>Review Moderation</h3>
                    <p class="text-muted small">8 Pending reviews require approval.</p>
                    <hr>
                    <div class="mb-3">
                        <div class="d-flex justify-content-between mb-1">
                            <strong>Rahul K.</strong>
                            <span style="color: #f59e0b;"><i class="fas fa-star"></i> 5/5</span>
                        </div>
                        <p class="small italic">"Amazing stay at Mumbai branch!"</p>
                        <div class="d-flex gap-2">
                            <button class="btn-small btn-primary" style="padding: 4px 10px; font-size: 0.7rem;">APPROVE</button>
                            <button class="btn-small btn-danger" style="padding: 4px 10px; font-size: 0.7rem;">DELETE</button>
                        </div>
                    </div>
                    <a href="#" class="btn-text">View All Pending</a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
